import{K as d,J as m,O as b,j as z,B as x,G as f,X as B,Y as v,S as O,o as w}from"./tsparticles-engine-4f96873b.js";class C{load(o){o&&(o.bottom!==void 0&&(this.bottom=d(o.bottom)),o.left!==void 0&&(this.left=d(o.left)),o.right!==void 0&&(this.right=d(o.right)),o.top!==void 0&&(this.top=d(o.top)))}}class S extends m{constructor(){super(),this.value=3}}class P extends m{constructor(){super(),this.value={min:4,max:9}}}class D{constructor(){this.count=1,this.factor=new S,this.rate=new P,this.sizeOffset=!0}load(o){var t;o&&(o.color!==void 0&&(this.color=b.create(this.color,o.color)),o.count!==void 0&&(this.count=o.count),this.factor.load(o.factor),this.rate.load(o.rate),this.particles=z(o.particles,s=>x({},s)),o.sizeOffset!==void 0&&(this.sizeOffset=o.sizeOffset),o.colorOffset&&(this.colorOffset=(t=this.colorOffset)!==null&&t!==void 0?t:{},o.colorOffset.h!==void 0&&(this.colorOffset.h=o.colorOffset.h),o.colorOffset.s!==void 0&&(this.colorOffset.s=o.colorOffset.s),o.colorOffset.l!==void 0&&(this.colorOffset.l=o.colorOffset.l)))}}class R{constructor(){this.bounds=new C,this.mode="none",this.split=new D}load(o){o&&(o.mode&&(this.mode=o.mode),o.bounds&&this.bounds.load(o.bounds),this.split.load(o.split))}}class _{constructor(o,t){this.engine=o,this.container=t}init(o){const t=this.container,s=o.options,l=s.destroy;if(!l)return;o.splitCount=0;const e=l.bounds;o.destroyBounds||(o.destroyBounds={}),e.bottom&&(o.destroyBounds.bottom=f(e.bottom)*t.canvas.size.height/100),e.left&&(o.destroyBounds.left=f(e.left)*t.canvas.size.width/100),e.right&&(o.destroyBounds.right=f(e.right)*t.canvas.size.width/100),e.top&&(o.destroyBounds.top=f(e.top)*t.canvas.size.height/100)}isEnabled(o){return!o.destroyed}loadOptions(o,...t){o.destroy||(o.destroy=new R);for(const s of t)o.destroy.load(s==null?void 0:s.destroy)}particleDestroyed(o,t){if(t)return;const s=o.options.destroy;s&&s.mode==="split"&&this.split(o)}update(o){if(!this.isEnabled(o))return;const t=o.getPosition(),s=o.destroyBounds;s&&(s.bottom!==void 0&&t.y>=s.bottom||s.left!==void 0&&t.x<=s.left||s.right!==void 0&&t.x>=s.right||s.top!==void 0&&t.y<=s.top)&&o.destroy()}addSplitParticle(o,t){var s,l,e;const c=o.options.destroy;if(!c)return;const r=c.split,i=B(this.engine,this.container,o.options),p=v(r.factor),h=o.getFillColor();r.color?i.color.load(r.color):r.colorOffset&&h?i.color.load({value:{hsl:{h:h.h+f((s=r.colorOffset.h)!==null&&s!==void 0?s:0),s:h.s+f((l=r.colorOffset.s)!==null&&l!==void 0?l:0),l:h.l+f((e=r.colorOffset.l)!==null&&e!==void 0?e:0)}}}):i.color.load({value:{hsl:o.getFillColor()}}),i.move.load({center:{x:o.position.x,y:o.position.y,mode:"precise"}}),typeof i.size.value=="number"?i.size.value/=p:(i.size.value.min/=p,i.size.value.max/=p),i.load(t);const a=r.sizeOffset?d(-o.size.value,o.size.value):0,g={x:o.position.x+O(a),y:o.position.y+O(a)};return this.container.particles.addParticle(g,i,o.group,u=>{var y;return u.size.value<.5?!1:(u.velocity.length=O(d(o.velocity.length,u.velocity.length)),u.splitCount=((y=o.splitCount)!==null&&y!==void 0?y:0)+1,u.unbreakable=!0,setTimeout(()=>{u.unbreakable=!1},500),!0)})}split(o){const t=o.options.destroy;if(!t)return;const s=t.split;if(s.count>=0&&(o.splitCount===void 0||o.splitCount++>s.count))return;const l=v(s.rate),e=w(s.particles);for(let c=0;c<l;c++)this.addSplitParticle(o,e)}}async function V(n){await n.addParticleUpdater("destroy",o=>new _(n,o))}export{V as l};
