import{c as y,e as R,f as u,P,k as m}from"./tsparticles-engine-4f96873b.js";function l(i,e,o,t,s,n){const d=y(i.options.collisions.absorb.speed*s.factor/10,0,t);i.size.value+=d/2,o.size.value-=d,t<=n&&(o.size.value=0,o.destroy())}function k(i,e,o,t){const s=i.getRadius(),n=e.getRadius();s===void 0&&n!==void 0?i.destroy():s!==void 0&&n===void 0?e.destroy():s!==void 0&&n!==void 0&&(s>=n?l(i,s,e,n,o,t):l(e,n,i,s,o,t))}function f(i,e){R(u(i),u(e))}function h(i,e){!i.unbreakable&&!e.unbreakable&&f(i,e),i.getRadius()===void 0&&e.getRadius()!==void 0?i.destroy():i.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():i.getRadius()!==void 0&&e.getRadius()!==void 0&&(i.getRadius()>=e.getRadius()?i:e).destroy()}function z(i,e,o,t){switch(i.options.collisions.mode){case"absorb":{k(i,e,o,t);break}case"bounce":{f(i,e);break}case"destroy":{h(i,e);break}}}class C extends P{constructor(e){super(e)}clear(){}init(){}async interact(e,o){const t=this.container,s=e.getPosition(),n=e.getRadius(),d=t.particles.quadTree.queryCircle(s,n*2);for(const a of d){if(e===a||!a.options.collisions.enable||e.options.collisions.mode!==a.options.collisions.mode||a.destroyed||a.spawning)continue;const r=a.getPosition(),c=a.getRadius();if(Math.abs(Math.round(s.z)-Math.round(r.z))>n+c)continue;const b=m(s,r),g=n+c;b>g||z(e,a,o,t.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function w(i){await i.addInteractor("particlesCollisions",e=>new C(e))}export{w as l};
